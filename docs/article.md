# Фибоначчи, магия и немного ненормального программирование на C
Доброго времени суток, господа хабровчане! Иногда у некоторых людей возникает желание заняться откровенным непотребством в программировании - то, что не несет практической пользы напрямую, но помогает развлечься. И я - не исключение. В этой статье я хочу рассказать вам о лайфхаках, трюках (магических и не очень), алгоритмах на языке C!

Идея написать эту статью зародилась из [моего поста](https://habr.com/ru/post/929236/), где я рассказал о том, что черех последовательность Фибоначчи можно конвертировать мили в километры с небольшой погрешностью (и написал конвертер на C). Увидев, что народу понравилась, я задумался, почему бы не изучить еще какие нибудь трюки, заодно практикуясь в программировании на C?

Всех, кто заинтересовался - прошу под кат. Конвертеры, интересные макросы, алгоритмы, задачки, и прочее прочее прочее.

---

Раз я уже начал рассказывать о Фибоначчи, немного процитирую свой пост:

 > Последовательность Фибоначчи может конвертировать мили в километры с небольшой погрешностью. 5 миль ≈ 8 км (5 и 8 - числа Фибоначчи). Реальность: 5 миль = 8.04672 км.
 > Почему? 1 миля = 1.609344 километра (точное значение). Золотое сечение (φ) ≈ 1.618034
 > Погрешность возникает потому что отношение Fₙ₊₁ / Fₙ стремится к φ ≈ 1.618034, а точное соотношение миля/км = 1.609344.
 > Относительная погрешность: (1.618034 - 1.609344) / 1.609344 * 100% ≈ 0.54%.

Давайте посмотрим, как реализовать такой конвертер на C.

Вот допустим есть такая функция:

```c
uint64_t fibonacci(int num) {
    if (num < 0)
        return 0;
    if (num == 0)
        return 0;

    uint64_t a = 0;
    uint64_t b = 1;

    if (num == 1)
        return b;

    for (int i = 2; i <= num; i++) {
        uint64_t next = a + b;
        a = b;
        b = next;
    }

    return b;
}
```

Работаем через цикл. Допустим мы хотим узнать сколько километров в 5 милях. Передаем как аргумент num+1 чтобы узнать следующее число Фибоначчи и получаем 8.
